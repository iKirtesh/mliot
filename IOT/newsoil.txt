#define BLYNK_TEMPLATE_ID "TMPL3EzT0tWpF"
#define BLYNK_TEMPLATE_NAME "Soil Moisture"

#define BLYNK_PRINT Serial
#include <ESP8266WiFi.h>
#include <SimpleTimer.h>
#include "BlynkEdgent.h"

SimpleTimer timer;


#define BLYNK_AUTH_TOKEN "bioLx5ycnxXP5UzCGgwXtsvjVOE1y6qf"

#include <BlynkSimpleEsp8266.h>
int moisture_percentage; 
BlynkTimer timer;

void myTimer() {
 Blynk.virtualWrite(V0, moisture_percentage); 
}

void setup(){
 Serial.begin(115200);
 Blynk.begin(BLYNK_AUTH_TOKEN, WIFISSID, PASSWORD); 
 timer.setInterval(1000L, myTimer); 
}

void loop()
{
 Blynk.run(); 
 timer.run(); 
 
 moisture_percentage = ( 100 - ((analogRead(A0)/1023.00) * 100)); 
 Serial.print("Moisture Percentage = ");
 Serial.print(moisture_percentage);
 Serial.print("%\n");
 delay(1000);
 if ( moisture_percentage > 30)
 { 
// digitalWrite(D1, HIGH); //D0
 Serial.println("does not need water");
 delay(1000); 
 }
 else
 { 
// digitalWrite(D1, LOW); //D0
 Serial.println("needs water");
 delay(1000); 
 }
}
